# Node 工具箱插件 - 开发文档

## 项目概述

### 插件名称

- **插件 ID**: `node-toolbox`
- **插件名称**: Node 工具箱
- **插件描述**: 一站式 Node.js 开发环境管理工具，支持 Node 下载安装、npmrc 配置管理、常用工具安装
- **插件分类**: `developer_essentials` (程序员必备)

### 技术栈

- **框架**: Vue 3 + TypeScript
- **样式**: Tailwind CSS 4.x
- **路由**: Vue Router
- **状态管理**: Pinia (可选)
- **构建工具**: Vite
- **包管理器**: pnpm

---

## 功能需求详细设计

### 1. Node.js 版本管理

#### 1.1 下载最新版本

**功能描述**：

- 自动获取 Node.js 官方最新 LTS 版本和 Current 版本
- 显示版本号、发布日期、变更日志
- 支持选择下载平台（Windows x64/x86、macOS、Linux）
- 显示下载进度条
- 下载完成后自动打开安装文件所在目录

**技术实现**：

- 通过 Node.js 官方 API 获取版本信息：`https://nodejs.org/dist/index.json`
- 使用 `naimo.system.downloadFile()` 下载安装包
- 监听下载进度事件更新 UI

**UI 设计**：

```
┌─────────────────────────────────────────┐
│  Node.js 版本管理                        │
├─────────────────────────────────────────┤
│  LTS 版本: v20.11.0  (推荐)  [下载]     │
│  最新版本: v21.6.0           [下载]     │
│                                          │
│  选择平台:                               │
│  ○ Windows x64  ○ Windows x86           │
│  ○ macOS        ○ Linux x64             │
│                                          │
│  下载进度: ████████░░ 80%                │
└─────────────────────────────────────────┘
```

#### 1.2 检查安装状态

**功能描述**：

- 检测系统当前安装的 Node.js 版本
- 检测 npm 版本
- 检测安装路径
- 显示是否需要更新

**技术实现**：

- 使用 preload 中的 Node.js API 执行 `node -v` 和 `npm -v`
- 通过 `child_process.exec()` 执行命令
- 解析输出结果显示在界面

**UI 设计**：

```
┌─────────────────────────────────────────┐
│  当前环境                                │
├─────────────────────────────────────────┤
│  ✓ Node.js: v20.11.0                    │
│  ✓ npm: v10.2.4                         │
│  ✓ 安装路径: C:\Program Files\nodejs   │
│                                          │
│  状态: 已是最新版本 ✓                   │
└─────────────────────────────────────────┘
```

---

### 2. npmrc 配置管理

#### 2.1 配置编辑器

**功能描述**：

- 基于 JSON 配置的动态表单生成系统
- 支持变量语法 `{{变量名}}`，可引用其他配置项
- 实时预览生成的 `.npmrc` 文件内容
- 支持保存多套配置方案（如：公司配置、个人配置、淘宝镜像配置等）
- 支持导入/导出配置文件

**配置数据结构**：

```typescript
interface NpmrcConfig {
  id: string; // 配置方案ID
  name: string; // 配置方案名称（如：淘宝镜像、公司内网、Electron专用）
  description: string; // 配置描述
  items: NpmrcConfigItem[]; // 配置项列表
}

interface NpmrcConfigItem {
  key: string; // 配置属性（如：registry）
  label: string; // 显示名称（如：镜像源）
  description: string; // 配置说明
  type: "text" | "select" | "boolean" | "number"; // 输入类型
  value: string; // 配置值（支持 {{变量}} 语法）
  defaultValue?: string; // 默认值
  options?: Array<{
    // 下拉选项（type='select'时使用）
    label: string;
    value: string;
  }>;
  placeholder?: string; // 输入提示
  required?: boolean; // 是否必填
}
```

**预设配置示例**：

**配置方案 1：淘宝镜像（默认）**

```json
{
  "id": "taobao",
  "name": "淘宝镜像",
  "description": "使用淘宝 NPM 镜像加速下载",
  "items": [
    {
      "key": "registry",
      "label": "镜像源",
      "description": "NPM 包下载源",
      "type": "select",
      "value": "https://registry.npmmirror.com",
      "options": [
        { "label": "淘宝镜像", "value": "https://registry.npmmirror.com" },
        { "label": "官方源", "value": "https://registry.npmjs.org" },
        { "label": "腾讯云", "value": "https://mirrors.cloud.tencent.com/npm/" }
      ]
    },
    {
      "key": "disturl",
      "label": "Node 源",
      "type": "text",
      "value": "https://npmmirror.com/mirrors/node",
      "description": "Node.js 二进制文件下载源"
    },
    {
      "key": "sass_binary_site",
      "label": "Sass 源",
      "type": "text",
      "value": "https://npmmirror.com/mirrors/node-sass",
      "description": "Node Sass 二进制文件源"
    }
  ]
}
```

**配置方案 2：Electron 专用配置**

```json
{
  "id": "electron",
  "name": "Electron 专用",
  "description": "Electron 开发环境配置，使用淘宝镜像加速",
  "items": [
    {
      "key": "registry",
      "label": "镜像源",
      "type": "select",
      "value": "https://registry.npmmirror.com",
      "options": [
        { "label": "淘宝镜像", "value": "https://registry.npmmirror.com" },
        { "label": "官方源", "value": "https://registry.npmjs.org" }
      ]
    },
    {
      "key": "electron_mirror",
      "label": "Electron 镜像",
      "type": "text",
      "value": "https://npmmirror.com/mirrors/electron/",
      "description": "Electron 二进制文件下载源"
    },
    {
      "key": "electron_builder_binaries_mirror",
      "label": "Electron Builder 镜像",
      "type": "text",
      "value": "https://npmmirror.com/mirrors/electron-builder-binaries/",
      "description": "Electron Builder 依赖下载源"
    }
  ]
}
```

**变量引用示例**：

```json
{
  "items": [
    {
      "key": "base_url",
      "label": "基础地址",
      "type": "text",
      "value": "https://registry.npmmirror.com"
    },
    {
      "key": "registry",
      "label": "镜像源",
      "type": "text",
      "value": "{{base_url}}/repository/npm-public/"
    }
  ]
}
```

**解析逻辑**：

```typescript
// 变量解析函数
function resolveVariables(config: NpmrcConfig): Record<string, string> {
  const resolved: Record<string, string> = {};
  const items = config.items;

  // 按顺序解析（确保依赖的变量先解析）
  for (const item of items) {
    let value = item.value;

    // 替换 {{变量名}} 为已解析的值
    value = value.replace(/\{\{(\w+)\}\}/g, (match, varName) => {
      const refItem = items.find((i) => i.key === varName);
      return resolved[varName] || refItem?.value || match;
    });

    resolved[item.key] = value;
  }

  return resolved;
}

// 生成 .npmrc 文件内容
function generateNpmrc(config: NpmrcConfig): string {
  const resolved = resolveVariables(config);
  return Object.entries(resolved)
    .map(([key, value]) => `${key}=${value}`)
    .join("\n");
}
```

#### 2.2 视图模式切换

**功能描述**：

- **双屏模式**：左侧编辑器 + 右侧 `.npmrc` 预览
- **单屏模式**：只显示编辑器或只显示预览
- 支持在三种模式间切换：双屏、仅编辑、仅预览
- 变量自动解析并高亮显示
- 支持一键复制到剪贴板
- 支持直接写入全局 `.npmrc` 文件

**UI 设计（双屏模式）**：

```

─────────────────────────────────────────────────────────┐
│  配置方案: [淘宝镜像 ▼]  [新建] [导入]                 │
│  视图: ● 双屏  ○ 仅编辑  ○ 仅预览                      │
├──────────────────────┬──────────────────────────────────┤
│ 配置编辑             │ .npmrc 预览                      │
│                      │                                  │
│ 镜像源:              │ registry=https://...             │
│ [淘宝镜像 ▼]        │ disturl=https://...              │
│                      │ electron_mirror=...              │
│ Node 源:             │                                  │
│ [https://...      ] │ [复制到剪贴板] [应用到全局配置]  │
│                      │                                  │
│ Electron 镜像:       │                                  │
│ [https://...      ] │                                  │
│                      │                                  │
│ [+ 添加配置项]       │                                  │
│                      │                                  │
│ [保存方案] [导出]    │                                  │
└──────────────────────┴──────────────────────────────────┘
```

**UI 设计（单屏模式 - 仅预览）**：

```
┌─────────────────────────────────────────────────────────┐
│  配置方案: [淘宝镜像 ▼]                                 │
│  视图: ○ 双屏  ○ 仅编辑  ● 仅预览                      │
├─────────────────────────────────────────────────────────┤
│  .npmrc 预览                                            │
│                                                          │
│  registry=https://registry.npmmirror.com                │
│  disturl=https://npmmirror.com/mirrors/node             │
│  sass_binary_site=https://npmmirror.com/mirrors/node-...│
│  electron_mirror=https://npmmirror.com/mirrors/elect... │
│  electron_builder_binaries_mirror=https://npmmirror.c...│
│                                                          │
│                                                          │
│  [复制到剪贴板] [应用到全局配置] [切换到编辑]          │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

#### 2.3 配置管理

**功能描述**：

- 支持创建、编辑、删除配置方案
- 支持切换不同配置方案
- 支持导入/导出配置 JSON 文件
- 配置本地持久化存储

**技术实现**：

- 使用 `naimo.storage` API 存储配置数据
- 使用 `naimo.system.readFile()` 和 `naimo.system.writeFile()` 操作 `.npmrc` 文件
- 全局 `.npmrc` 路径：`%USERPROFILE%\.npmrc` (Windows) 或 `~/.npmrc` (macOS/Linux)

---

### 3. 全局包管理

#### 3.1 全局包扫描与更新检测

**功能描述**：

- **自动扫描**：检测系统全局已安装的所有 npm 包
- **版本检测**：自动检查每个包是否有新版本可更新
- **更新提示**：显示当前版本和最新版本的对比
- **分类显示**：按包管理器、开发工具、语言工具等分类
- **推荐工具**：提供常用工具推荐列表，快速安装

**数据结构**：

```typescript
interface GlobalPackage {
  name: string; // 包名
  displayName?: string; // 显示名称（可选）
  currentVersion: string; // 当前安装版本
  latestVersion?: string; // 最新版本
  hasUpdate: boolean; // 是否有更新
  description?: string; // 包描述
  category?: string; // 分类
  recommended?: boolean; // 是否为推荐工具
}

interface PackageUpdateInfo {
  name: string;
  currentVersion: string;
  latestVersion: string;
  updateType: "major" | "minor" | "patch"; // 更新类型
}
```

**预设推荐工具列表**：

```typescript
const RECOMMENDED_TOOLS: Array<{
  name: string;
  displayName: string;
  description: string;
  category: string;
}> = [
  {
    name: "pnpm",
    displayName: "pnpm",
    description: "快速、节省磁盘空间的包管理器",
    category: "包管理器",
  },
  {
    name: "yarn",
    displayName: "Yarn",
    description: "Facebook 开发的包管理器",
    category: "包管理器",
  },
  {
    name: "rimraf",
    displayName: "rimraf",
    description: "跨平台删除文件和目录工具",
    category: "开发工具",
  },
  {
    name: "nrm",
    displayName: "nrm",
    description: "NPM 镜像源管理工具",
    category: "开发工具",
  },
  {
    name: "typescript",
    displayName: "TypeScript",
    description: "JavaScript 的超集，添加静态类型",
    category: "语言工具",
  },
  {
    name: "ts-node",
    displayName: "ts-node",
    description: "直接运行 TypeScript 文件",
    category: "语言工具",
  },
  {
    name: "nodemon",
    displayName: "nodemon",
    description: "文件变化时自动重启 Node.js 应用",
    category: "开发工具",
  },
  {
    name: "pm2",
    displayName: "PM2",
    description: "Node.js 进程管理器",
    category: "部署工具",
  },
];
```

#### 3.2 包管理功能

**功能描述**：

- **安装**：从推荐列表或搜索结果安装包
- **更新**：一键更新到最新版本
- **卸载**：卸载全局包
- **批量操作**：批量安装推荐工具、批量更新所有过期包
- **进度显示**：实时显示安装/更新进度和日志
- **错误处理**：安装失败时显示详细错误信息

**技术实现**：

```typescript
// 获取全局已安装包列表
async function listGlobalPackages(): Promise<GlobalPackage[]> {
  const packages = await window.nodeToolboxAPI.listGlobalPackages();

  // 并发检查每个包的最新版本
  const packagesWithUpdate = await Promise.all(
    packages.map(async (pkg) => {
      const latestVersion = await window.nodeToolboxAPI.getLatestVersion(
        pkg.name
      );
      return {
        ...pkg,
        latestVersion,
        hasUpdate: latestVersion && latestVersion !== pkg.currentVersion,
      };
    })
  );

  return packagesWithUpdate;
}

// 检查包更新
async function checkPackageUpdate(
  packageName: string
): Promise<PackageUpdateInfo | null> {
  const current = await window.nodeToolboxAPI.checkGlobalPackage(packageName);
  if (!current.installed) return null;

  const latest = await window.nodeToolboxAPI.getLatestVersion(packageName);
  if (!latest || latest === current.version) return null;

  return {
    name: packageName,
    currentVersion: current.version!,
    latestVersion: latest,
    updateType: getUpdateType(current.version!, latest),
  };
}

// 安装/更新/卸载
async function installPackage(packageName: string): Promise<void> {
  await window.nodeToolboxAPI.installGlobalPackage(packageName);
}

async function updatePackage(packageName: string): Promise<void> {
  await window.nodeToolboxAPI.updateGlobalPackage(packageName);
}

async function uninstallPackage(packageName: string): Promise<void> {
  await window.nodeToolboxAPI.uninstallGlobalPackage(packageName);
}

// 批量更新所有过期包
async function updateAllPackages(packages: string[]): Promise<void> {
  for (const pkg of packages) {
    await updatePackage(pkg);
  }
}
```

**UI 设计**：

```
┌─────────────────────────────────────────────────────────┐
│  全局包管理                                              │
│  [刷新] [批量更新全部 (3)]                              │
├─────────────────────────────────────────────────────────┤
│  已安装的包 (12)                                         │
│                                                          │
│  包管理器                                                │
│  ────────────────────────────────────────────────────   │
│  ┌────────────────────────────────────────────────┐    │
│  │ ✓ pnpm                                          │    │
│  │   v8.15.0 → v9.0.1 可更新    [更新] [卸载]    │    │
│  └────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────┐    │
│  │ ✓ npm                                           │    │
│  │   v10.2.4 (最新)              [卸载]           │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
│  开发工具                                                │
│  ────────────────────────────────────────────────────   │
│  ┌────────────────────────────────────────────────┐    │
│  │ ✓ rimraf                                        │    │
│  │   v5.0.5 → v6.0.1 可更新      [更新] [卸载]   │    │
│  └────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────┐    │
│  │ ✓ typescript                                    │    │
│  │   v5.3.3 → v5.7.2 可更新      [更新] [卸载]   │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
│  ─────────────────────────────────────────────────────  │
│                                                          │
│  推荐工具 (未安装)                                       │
│  ┌────────────────────────────────────────────────┐    │
│  │ ○ nodemon - 自动重启 Node 应用   [安装]       │    │
│  └────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────┐    │
│  │ ○ pm2 - Node.js 进程管理器       [安装]       │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
│  [批量安装推荐工具]                                      │
└─────────────────────────────────────────────────────────┘
```

---

### 4. 界面设计

#### 4.1 整体布局

**使用 Tab 切换（Vue Router）**：

```
┌─────────────────────────────────────────────┐
│  🚀 Node 工具箱                              │
├─────────────────────────────────────────────┤
│  [Node 管理] [npmrc 配置] [全局包管理]      │
├─────────────────────────────────────────────┤
│                                              │
│  (Tab 对应的页面内容)                        │
│                                              │
│                                              │
└─────────────────────────────────────────────┘
```

**路由配置**：

```typescript
const routes = [
  { path: "/", redirect: "/node" },
  { path: "/node", component: NodeManager }, // Node.js 管理
  { path: "/npmrc", component: NpmrcConfig }, // npmrc 配置
  { path: "/packages", component: PackagesManager }, // 全局包管理
];
```

#### 4.2 UI 风格

**主题**：亮色主题（Light Mode）

**配色方案**：

```css
:root {
  /* 主色调 - 现代蓝紫渐变 */
  --primary: #6366f1; /* Indigo 500 */
  --primary-light: #818cf8; /* Indigo 400 */
  --primary-dark: #4f46e5; /* Indigo 600 */

  /* 背景色 */
  --bg-base: #ffffff;
  --bg-secondary: #f9fafb; /* Gray 50 */
  --bg-tertiary: #f3f4f6; /* Gray 100 */

  /* 文字颜色 */
  --text-primary: #111827; /* Gray 900 */
  --text-secondary: #6b7280; /* Gray 500 */
  --text-tertiary: #9ca3af; /* Gray 400 */

  /* 边框 */
  --border-color: #e5e7eb; /* Gray 200 */

  /* 状态色 */
  --success: #10b981; /* Green 500 */
  --warning: #f59e0b; /* Amber 500 */
  --error: #ef4444; /* Red 500 */
  --info: #3b82f6; /* Blue 500 */
}
```

**炫酷按钮设计**：

```css
/* 主按钮 - 渐变 + 阴影 + hover 动画 */
.btn-primary {
  @apply bg-gradient-to-r from-indigo-500 to-purple-500 
         text-white px-6 py-2.5 rounded-lg 
         shadow-lg shadow-indigo-500/50
         hover:shadow-xl hover:shadow-indigo-500/60
         hover:scale-105
         transition-all duration-300
         font-medium;
}

/* 次要按钮 - 边框 + hover 填充动画 */
.btn-secondary {
  @apply border-2 border-indigo-500 text-indigo-600 
         px-6 py-2.5 rounded-lg
         hover:bg-indigo-500 hover:text-white
         transition-all duration-300
         font-medium;
}

/* 下载按钮 - 特殊动画 */
.btn-download {
  @apply relative overflow-hidden
         bg-gradient-to-r from-green-500 to-emerald-500
         text-white px-6 py-2.5 rounded-lg
         shadow-lg shadow-green-500/50
         hover:shadow-xl hover:shadow-green-500/60
         transition-all duration-300
         font-medium;
}

.btn-download::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
}

.btn-download:hover::before {
  width: 300px;
  height: 300px;
}
```

**特效组件**：

1. **加载动画** - 使用 CSS 渐变 + 动画

```html
<div class="loading-shimmer">
  <div class="shimmer-line"></div>
</div>
```

2. **进度条** - 渐变色 + 动画

```html
<div class="progress-bar">
  <div class="progress-fill" style="width: 60%">
    <span class="progress-text">60%</span>
  </div>
</div>
```

3. **卡片悬停效果**

```css
.card {
  @apply bg-white rounded-xl p-6 border border-gray-200
         shadow-sm hover:shadow-xl
         hover:-translate-y-1
         transition-all duration-300;
}
```

4. **Tab 切换动画**

```css
.tab-item {
  @apply relative px-6 py-3 text-gray-600
         hover:text-indigo-600
         transition-all duration-300
         cursor-pointer;
}

.tab-item.active {
  @apply text-indigo-600 font-medium;
}

.tab-item.active::after {
  content: "";
  @apply absolute bottom-0 left-0 right-0 
         h-0.5 bg-gradient-to-r from-indigo-500 to-purple-500
         rounded-full;
}
```

---

## 技术架构

### 项目结构

```
node-toolbox/
├── manifest.json                # 插件配置
├── index.html                   # 入口页面
├── package.json
├── vite.config.ts
├── tsconfig.json
├── tailwind.config.js          # Tailwind 配置
├── src/
│   ├── main.ts                  # 应用入口
│   ├── preload.ts               # Preload 脚本（Node.js API）
│   ├── style.css                # 全局样式（Tailwind）
│   ├── App.vue                  # 根组件
│   ├── router/
│   │   └── index.ts             # Vue Router 配置
│   ├── stores/                  # Pinia 状态管理（可选）
│   │   ├── node.ts              # Node 管理状态
│   │   ├── npmrc.ts             # npmrc 配置状态
│   │   └── packages.ts          # 全局包管理状态
│   ├── views/                   # 页面组件
│   │   ├── NodeManager.vue      # Node 管理页面
│   │   ├── NpmrcConfig.vue      # npmrc 配置页面
│   │   └── PackagesManager.vue  # 全局包管理页面
│   ├── components/              # 通用组件
│   │   ├── TabLayout.vue        # Tab 布局
│   │   ├── Button.vue           # 按钮组件
│   │   ├── Card.vue             # 卡片组件
│   │   ├── ProgressBar.vue      # 进度条
│   │   ├── ConfigEditor.vue     # 配置编辑器
│   │   └── CodePreview.vue      # 代码预览
│   ├── composables/             # 组合式函数
│   │   ├── useNodeVersion.ts    # Node 版本管理
│   │   ├── useNpmrc.ts          # npmrc 配置管理
│   │   └── usePackages.ts       # 全局包管理
│   ├── types/                   # 类型定义
│   │   ├── node.ts
│   │   ├── npmrc.ts
│   │   └── packages.ts
│   └── utils/                   # 工具函数
│       ├── npmrc-parser.ts      # npmrc 解析
│       └── version-compare.ts   # 版本比较
├── typings/
│   ├── naimo.d.ts
│   └── vite-env.d.ts
└── public/
    └── ico.png
```

### Preload API 设计

```typescript
// src/preload.ts
interface NodeToolboxAPI {
  // Node 版本检测
  getNodeVersion: () => Promise<string | null>;
  getNpmVersion: () => Promise<string | null>;
  getNodePath: () => Promise<string | null>;

  // 执行命令
  executeCommand: (command: string) => Promise<{
    stdout: string;
    stderr: string;
    exitCode: number;
  }>;

  // 全局包管理
  installGlobalPackage: (name: string) => Promise<void>;
  updateGlobalPackage: (name: string) => Promise<void>;
  uninstallGlobalPackage: (name: string) => Promise<void>;
  checkGlobalPackage: (name: string) => Promise<{
    installed: boolean;
    version?: string;
  }>;
  listGlobalPackages: () => Promise<
    Array<{
      name: string;
      version: string;
    }>
  >;
  getLatestVersion: (name: string) => Promise<string | null>;
  batchUpdatePackages: (names: string[]) => Promise<
    Array<{
      name: string;
      success: boolean;
      error?: string;
    }>
  >;

  // npmrc 文件操作
  readNpmrc: () => Promise<string>;
  writeNpmrc: (content: string) => Promise<void>;
  getNpmrcPath: () => Promise<string>;
  backupNpmrc: () => Promise<string>; // 备份当前 npmrc，返回备份路径
  restoreNpmrc: (backupPath: string) => Promise<void>; // 恢复备份
}
```

### 依赖包列表

```json
{
  "dependencies": {
    "vue": "^3.5.22",
    "vue-router": "^4.5.0",
    "pinia": "^2.3.0"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^6.0.1",
    "@tailwindcss/vite": "^4.1.13",
    "tailwindcss": "^4.1.13",
    "@types/node": "^22.0.0",
    "typescript": "^5.9.2",
    "vite": "^7.1.5",
    "electron": "^38.2.2"
  }
}
```

---

## 开发流程

### 步骤 1：创建插件目录

```powershell
cd packages
mkdir node-toolbox
cd node-toolbox
```

### 步骤 2：初始化插件框架

```powershell
npx naimo-plugin-cli init
```

**检查初始化是否成功**：

- 检查是否生成 `manifest.json`
- 检查是否生成 `src/` 目录
- 检查是否生成 `package.json`
- 如果缺少任何文件，表示初始化失败，需要重新执行

### 步骤 3：安装依赖

```powershell
pnpm install
pnpm add vue vue-router pinia
pnpm add -D @vitejs/plugin-vue @tailwindcss/vite tailwindcss
pnpm run add-electron-types
```

### 步骤 4：配置 Vite（支持 Vue）

修改 `vite.config.ts`，添加 Vue 和 Tailwind CSS 插件。

### 步骤 5：配置 Tailwind CSS

创建 `tailwind.config.js` 并配置主题。

### 步骤 6：开发功能模块

按照功能需求逐个实现：

1. Node 版本管理模块
2. npmrc 配置管理模块
3. 全局包管理模块

### 步骤 7：测试

```powershell
pnpm run dev
```

- 复制 dist 路径
- 在 Naimo 中粘贴加载插件
- 测试各项功能

### 步骤 8：构建发布

```powershell
pnpm run build
```

---

## manifest.json 配置

```json
{
  "$schema": "./schema.json",
  "id": "node-toolbox",
  "name": "Node 工具箱",
  "version": "1.0.0",
  "author": "Naimo Tools",
  "icon": "./ico.png",
  "description": "一站式 Node.js 开发环境管理工具",
  "category": "developer_essentials",
  "enabled": true,
  "main": "./index.html",
  "preload": "./preload.js",
  "feature": [
    {
      "path": "node-toolbox",
      "name": "Node 工具箱",
      "icon": "./ico.png",
      "description": "Node.js 环境管理、npmrc 配置、全局包管理",
      "type": "text",
      "anonymousSearchFields": [
        "node",
        "nodejs",
        "npm",
        "npmrc",
        "工具箱",
        "环境管理",
        "包管理"
      ]
    }
  ]
}
```

---

## 界面原型示意

### Tab 1: Node 管理

```
┌─────────────────────────────────────────────────────────┐
│  🚀 Node 工具箱                                          │
├─────────────────────────────────────────────────────────┤
│  [Node 管理]  npmrc 配置  全局包管理                    │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  当前环境                                                │
│  ┌────────────────────────────────────────────────┐    │
│  │ ✓ Node.js: v20.11.0                            │    │
│  │ ✓ npm: v10.2.4                                 │    │
│  │ ✓ 安装路径: C:\Program Files\nodejs           │    │
│  │ 状态: 已是最新版本 ✓                           │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
│  下载 Node.js                                            │
│  ┌────────────────────────────────────────────────┐    │
│  │ LTS 版本: v20.11.0  (推荐)      [下载安装包]  │    │
│  │ 最新版本: v21.6.0               [下载安装包]  │    │
│  │                                                 │    │
│  │ 选择平台:                                       │    │
│  │ ● Windows x64  ○ Windows x86                   │    │
│  │ ○ macOS        ○ Linux x64                     │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

### Tab 2: npmrc 配置

```
┌─────────────────────────────────────────────────────────┐
│  🚀 Node 工具箱                                          │
├─────────────────────────────────────────────────────────┤
│  Node 管理  [npmrc 配置]  全局包管理                    │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌────────────────────┬────────────────────────────┐   │
│  │ 配置编辑           │ .npmrc 预览                │   │
│  │                    │                            │   │
│  │ 配置方案:          │ registry=https://...       │   │
│  │ [淘宝镜像 ▼]      │ disturl=https://...        │   │
│  │ [+ 新建] [导入]    │ electron_mirror=...        │   │
│  │                    │                            │   │
│  │ 镜像源:            │ [📋 复制]  [✓ 应用到全局] │   │
│  │ [淘宝镜像 ▼]      │                            │   │
│  │                    │                            │   │
│  │ Node 源:           │                            │   │
│  │ [https://...    ] │                            │   │
│  │                    │                            │   │
│  │ Electron 镜像:     │                            │   │
│  │ [https://...    ] │                            │   │
│  │                    │                            │   │
│  │ [+ 添加配置项]     │                            │   │
│  │                    │                            │   │
│  │ [保存] [删除方案]  │                            │   │
│  └────────────────────┴────────────────────────────┘   │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

### Tab 3: 全局包管理

```
┌─────────────────────────────────────────────────────────┐
│  🚀 Node 工具箱                                          │
├─────────────────────────────────────────────────────────┤
│  Node 管理  npmrc 配置  [全局包管理]                    │
├─────────────────────────────────────────────────────────┤
│  [🔄 刷新]  [⬆ 批量更新全部 (3)]                        │
│                                                          │
│  已安装的包 (12)                                         │
│                                                          │
│  包管理器                                                │
│  ────────────────────────────────────────────────────   │
│  ┌────────────────────────────────────────────────┐    │
│  │ ✓ pnpm                                          │    │
│  │   v8.15.0 → v9.0.1 可更新  [更新] [卸载]      │    │
│  └────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────┐    │
│  │ ✓ npm                                           │    │
│  │   v10.2.4 (最新)            [卸载]             │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
│  开发工具                                                │
│  ────────────────────────────────────────────────────   │
│  ┌────────────────────────────────────────────────┐    │
│  │ ✓ rimraf                                        │    │
│  │   v5.0.5 → v6.0.1 可更新    [更新] [卸载]     │    │
│  └────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────┐    │
│  │ ✓ typescript                                    │    │
│  │   v5.3.3 → v5.7.2 可更新    [更新] [卸载]     │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
│  ─────────────────────────────────────────────────────  │
│                                                          │
│  推荐工具 (未安装)                                       │
│  ┌────────────────────────────────────────────────┐    │
│  │ ○ nodemon - 自动重启 Node 应用   [安装]       │    │
│  └────────────────────────────────────────────────┘    │
│  ┌────────────────────────────────────────────────┐    │
│  │ ○ pm2 - Node.js 进程管理器       [安装]       │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
│  [📦 批量安装推荐工具]                                   │
└─────────────────────────────────────────────────────────┘
```

---

## 注意事项

1. **初始化检查**：执行 `npx naimo-plugin-cli init` 后，必须检查文件是否生成成功，如果失败则不能继续
2. **PowerShell 环境**：所有命令都在 Windows PowerShell 中执行
3. **包管理器**：必须使用 pnpm，不要使用 npm 或 yarn
4. **文件位置**：所有源代码必须在 `src/` 目录下，不要在根目录创建 .ts/.js 文件
5. **Tailwind CSS 版本**：使用 v4.x，配置方式与 v3 有所不同
6. **Vue Router**：必须配置 hash 模式（Electron 环境）
7. **Preload API**：所有 Node.js 操作必须通过 preload 暴露的 API
8. **错误处理**：所有异步操作都要添加 try-catch
9. **用户体验**：操作要有明确的进度提示和结果反馈
10. **变量解析**：npmrc 配置中的变量要按顺序解析，确保依赖关系正确

---

## 下一步

请检查此开发文档，确认功能需求和技术设计无误后，我将开始按照项目初始化流程进行代码开发。
