import{a as v,u as b,r as w,x as C,b as t,k as L,f as a,e as c,l as d,E as B,B as V,F as i,s as h,n as p,t as o,m as T,o as s,v as z}from"./main.CX8EqZtS.js";const $={class:"w-full h-full flex flex-col bg-white"},H={class:"opacity-60 flex-shrink-0 text-gray-500 select-none"},F={class:"flex-1 break-all whitespace-pre-wrap"},M={key:1,class:"my-1 bg-gray-100 rounded"},N=["onClick"],R={class:"opacity-60 flex-shrink-0 text-gray-500 select-none"},S={class:"flex-shrink-0"},j={key:0,class:"w-3.5 h-3.5 text-blue-600 animate-spin inline-block mt-0.5",fill:"none",viewBox:"0 0 24 24"},E={key:1,class:"text-green-600 font-bold"},A={key:2,class:"text-red-600 font-bold"},D={class:"flex-1 font-semibold text-gray-800"},I={key:0,class:"text-gray-500 font-normal text-xs ml-2"},q={key:1,class:"text-gray-400 font-normal text-xs ml-2"},G={key:0},J={class:"py-0.5 space-y-0.5"},K={class:"opacity-60 flex-shrink-0 text-gray-500 select-none"},O={class:"flex-1 break-all whitespace-pre-wrap"},P={class:"opacity-60 flex-shrink-0 text-gray-500 select-none"},Q={class:"flex-1 break-all whitespace-pre-wrap"},U={class:"opacity-60 flex-shrink-0 text-gray-500 select-none"},W={class:"flex-1 break-all whitespace-pre-wrap"},X={key:0,class:"text-gray-400 text-center py-20"},ee=v({__name:"TerminalView",setup(Y){const g=B(),m=b(),x=w();function y(l){return{info:"text-gray-700",success:"text-green-600",warning:"text-yellow-600",error:"text-red-600","command-group":"text-blue-700"}[l]||"text-gray-700"}function f(l){return{running:"bg-blue-50 hover:bg-blue-100",success:"bg-emerald-50 hover:bg-emerald-100",error:"bg-rose-50 hover:bg-rose-100"}[l]||"bg-gray-100 hover:bg-gray-150"}function k(l,r){return l?l.slice(-5):[]}return C(()=>m.logs.length,()=>{z(()=>{x.value&&(x.value.scrollTop=x.value.scrollHeight)})},{deep:!0}),(l,r)=>(s(),t(i,null,[(s(),L(V,{to:"#tab-actions"},[d(g).path==="/terminal"&&d(m).logs.length>0?(s(),t("button",{key:0,onClick:r[0]||(r[0]=e=>d(m).clear()),class:"px-3 py-1.5 text-xs text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors font-medium"}," 清空日志 ")):c("",!0)])),a("div",$,[a("div",{ref_key:"terminalRef",ref:x,class:"flex-1 overflow-y-auto p-4 space-y-0.5 font-mono text-xs"},[(s(!0),t(i,null,h(d(m).logs,(e,_)=>(s(),t(i,{key:_},[e.type!=="command-group"?(s(),t("div",{key:0,class:p(["flex items-start gap-3",y(e.type)])},[a("span",H,o(e.time),1),a("span",F,o(e.message),1)],2)):(s(),t("div",M,[a("div",{onClick:n=>e.commandLogs&&e.commandLogs.length>5?d(m).toggleCommandCollapse(e.commandId):null,class:p(["flex items-start gap-3 py-1 transition-colors sticky z-20",[f(e.status),e.commandLogs&&e.commandLogs.length>5?"cursor-pointer":""]]),style:{top:"-1rem"}},[a("span",R,o(e.time),1),e.commandLogs&&e.commandLogs.length>5?(s(),t("svg",{key:0,class:p(["w-3 h-3 flex-shrink-0 transition-transform mt-0.5 text-gray-600",e.collapsed?"":"rotate-90"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...r[1]||(r[1]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M9 5l7 7-7 7"},null,-1)])],2)):c("",!0),a("span",S,[e.status==="running"?(s(),t("svg",j,[...r[2]||(r[2]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"3"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):e.status==="success"?(s(),t("span",E,"✓")):e.status==="error"?(s(),t("span",A,"✗")):c("",!0)]),a("span",D,[T(o(e.command)+" ",1),e.exitCode!==void 0?(s(),t("span",I," (退出码: "+o(e.exitCode)+") ",1)):c("",!0),e.commandLogs&&e.commandLogs.length>5?(s(),t("span",q,o(e.commandLogs.length)+" 行 ",1)):c("",!0)])],10,N),e.commandLogs&&e.commandLogs.length>0?(s(),t("div",G,[a("div",J,[e.commandLogs.length<=5?(s(!0),t(i,{key:0},h(e.commandLogs,(n,u)=>(s(),t("div",{key:`cmd-${u}`,class:p(["flex items-start gap-3",y(n.type)])},[a("span",K,o(n.time),1),a("span",O,o(n.message),1)],2))),128)):(s(),t(i,{key:1},[e.collapsed?(s(!0),t(i,{key:0},h(k(e.commandLogs),(n,u)=>(s(),t("div",{key:`cmd-${u}`,class:p(["flex items-start gap-3",y(n.type)])},[a("span",P,o(n.time),1),a("span",Q,o(n.message),1)],2))),128)):(s(!0),t(i,{key:1},h(e.commandLogs,(n,u)=>(s(),t("div",{key:`cmd-${u}`,class:p(["flex items-start gap-3",y(n.type)])},[a("span",U,o(n.time),1),a("span",W,o(n.message),1)],2))),128))],64))])])):c("",!0)]))],64))),128)),d(m).logs.length===0?(s(),t("div",X,[...r[3]||(r[3]=[a("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),a("p",{class:"text-sm"},"暂无日志",-1)])])):c("",!0)],512)])],64))}});export{ee as default};
