import{a as le,r as y,c as X,i as re,p as ae,b as u,f as r,q as C,n as P,t as M,_ as A,T as ne,w as se,e as L,F as R,s as I,k as Y,v as de,o as c,x as F,y as S,z as oe,A as ie,B as pe,g as ue,C as Q,u as ye,D as me,l as be,E as he,G as ve}from"./main.CX8EqZtS.js";const J=[{key:"registry",label:"registry",description:"npm 包下载源",type:"text",category:"NPM包镜像",options:[{label:"官方源",value:"https://registry.npmjs.org"},{label:"淘宝镜像",value:"https://registry.npmmirror.com"},{label:"腾讯云",value:"https://mirrors.cloud.tencent.com/npm/"},{label:"华为云",value:"https://mirrors.huaweicloud.com/repository/npm/"}],placeholder:"https://registry.npmjs.org"},{key:"disturl",label:"disturl",description:"Node.js 二进制文件下载源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors/node"},{label:"官方源",value:"https://nodejs.org/dist"},{label:"腾讯云",value:"https://mirrors.cloud.tencent.com/nodejs-release/"}],placeholder:"https://npmmirror.com/mirrors/node"},{key:"sass_binary_site",label:"sass_binary_site",description:"Node Sass 二进制文件源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors/node-sass"},{label:"GitHub 官方",value:"https://github.com/sass/node-sass/releases/download"}],placeholder:"https://npmmirror.com/mirrors/node-sass"},{key:"electron_mirror",label:"electron_mirror",description:"Electron 二进制文件下载源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors/electron/"},{label:"官方源",value:"https://github.com/electron/electron/releases/download/"},{label:"腾讯云",value:"https://mirrors.cloud.tencent.com/electron/"}],placeholder:"https://npmmirror.com/mirrors/electron/"},{key:"electron_builder_binaries_mirror",label:"electron_builder_binaries_mirror",description:"Electron Builder 依赖下载源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors/electron-builder-binaries/"},{label:"GitHub 官方",value:"https://github.com/electron-userland/electron-builder-binaries/releases/download/"}],placeholder:"https://npmmirror.com/mirrors/electron-builder-binaries/"},{key:"puppeteer_download_host",label:"puppeteer_download_host",description:"Puppeteer Chromium 下载源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors"},{label:"官方源",value:"https://storage.googleapis.com"}],placeholder:"https://npmmirror.com/mirrors"},{key:"chromedriver_cdnurl",label:"chromedriver_cdnurl",description:"ChromeDriver 下载源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors/chromedriver"},{label:"官方源",value:"https://chromedriver.storage.googleapis.com"}],placeholder:"https://npmmirror.com/mirrors/chromedriver"},{key:"operadriver_cdnurl",label:"operadriver_cdnurl",description:"OperaDriver 下载源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors/operadriver"},{label:"GitHub 官方",value:"https://github.com/operasoftware/operachromiumdriver/releases"}],placeholder:"https://npmmirror.com/mirrors/operadriver"},{key:"phantomjs_cdnurl",label:"phantomjs_cdnurl",description:"PhantomJS 下载源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors/phantomjs"},{label:"Bitbucket 官方",value:"https://bitbucket.org/ariya/phantomjs/downloads"}],placeholder:"https://npmmirror.com/mirrors/phantomjs"},{key:"selenium_cdnurl",label:"selenium_cdnurl",description:"Selenium 下载源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors/selenium"},{label:"官方源",value:"https://selenium-release.storage.googleapis.com"}],placeholder:"https://npmmirror.com/mirrors/selenium"},{key:"node_sqlite3_binary_host_mirror",label:"node_sqlite3_binary_host_mirror",description:"SQLite3 二进制文件源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors"},{label:"GitHub 官方",value:"https://github.com/mapbox/node-sqlite3/releases/download"}],placeholder:"https://npmmirror.com/mirrors"},{key:"python_mirror",label:"python_mirror",description:"Python 下载源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors/python"},{label:"官方源",value:"https://www.python.org/ftp/python"},{label:"华为云",value:"https://mirrors.huaweicloud.com/python"}],placeholder:"https://npmmirror.com/mirrors/python"},{key:"sentrycli_cdnurl",label:"sentrycli_cdnurl",description:"Sentry CLI 下载源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors/sentry-cli"},{label:"GitHub 官方",value:"https://github.com/getsentry/sentry-cli/releases/download"}],placeholder:"https://npmmirror.com/mirrors/sentry-cli"},{key:"sharp_binary_host",label:"sharp_binary_host",description:"Sharp 图像处理库下载源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors/sharp"},{label:"GitHub 官方",value:"https://github.com/lovell/sharp-libvips/releases/download"}],placeholder:"https://npmmirror.com/mirrors/sharp"},{key:"sharp_libvips_binary_host",label:"sharp_libvips_binary_host",description:"Sharp libvips 下载源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors/sharp-libvips"},{label:"GitHub 官方",value:"https://github.com/lovell/sharp-libvips/releases/download"}],placeholder:"https://npmmirror.com/mirrors/sharp-libvips"},{key:"canvas_binary_host_mirror",label:"canvas_binary_host_mirror",description:"Canvas 下载源",type:"text",category:"二进制下载源",options:[{label:"淘宝镜像",value:"https://npmmirror.com/mirrors/node-canvas-prebuilt"},{label:"GitHub 官方",value:"https://github.com/Automattic/node-canvas/releases/download"}],placeholder:"https://npmmirror.com/mirrors/node-canvas-prebuilt"},{key:"save",label:"save",description:"默认保存到 dependencies",type:"boolean",category:"NPM安装选项",defaultValue:"true"},{key:"save-exact",label:"save-exact",description:"保存精确版本号",type:"boolean",category:"NPM安装选项"},{key:"save-prefix",label:"save-prefix",description:"保存版本前缀（^、~、空）",type:"select",category:"NPM安装选项",options:[{label:"^（兼容版本）",value:"^"},{label:"~（补丁版本）",value:"~"},{label:"精确版本",value:""}]},{key:"package-lock",label:"package-lock",description:"是否生成 package-lock.json",type:"boolean",category:"NPM安装选项",defaultValue:"true"},{key:"ignore-scripts",label:"ignore-scripts",description:"忽略 package.json 中的脚本",type:"boolean",category:"NPM安装选项"},{key:"optional",label:"optional",description:"安装可选依赖",type:"boolean",category:"NPM安装选项",defaultValue:"true"},{key:"production",label:"production",description:"仅安装生产依赖",type:"boolean",category:"NPM安装选项"},{key:"force",label:"force",description:"强制安装/覆盖",type:"boolean",category:"NPM安装选项"},{key:"omit",label:"omit",description:"省略依赖类型",type:"select",category:"NPM安装选项",options:[{label:"dev（开发依赖）",value:"dev"},{label:"optional（可选依赖）",value:"optional"},{label:"peer（对等依赖）",value:"peer"}]},{key:"dry-run",label:"dry-run",description:"模拟运行，不实际安装",type:"boolean",category:"NPM安装选项"},{key:"bin-links",label:"bin-links",description:"创建 bin 符号链接",type:"boolean",category:"NPM安装选项",defaultValue:"true"},{key:"prefix",label:"prefix",description:"npm: 全局安装路径（npm install -g 时使用，不影响项目依赖）",type:"text",category:"NPM路径配置",placeholder:"Windows: %APPDATA%/npm | macOS/Linux: /usr/local"},{key:"cache",label:"cache",description:"npm: 下载缓存目录（所有项目共享）⭐ 常用配置",type:"text",category:"NPM路径配置",placeholder:"Windows: %APPDATA%/npm-cache | macOS/Linux: ~/.npm"},{key:"cache-min",label:"cache-min",description:"缓存最小时间（秒）",type:"text",category:"缓存策略"},{key:"cache-max",label:"cache-max",description:"缓存最大时间（秒）",type:"text",category:"缓存策略"},{key:"prefer-offline",label:"prefer-offline",description:"优先使用缓存",type:"boolean",category:"缓存策略"},{key:"prefer-online",label:"prefer-online",description:"优先从网络获取",type:"boolean",category:"缓存策略"},{key:"proxy",label:"proxy",description:"HTTP 代理",type:"text",category:"代理配置",placeholder:"http://proxy.example.com:8080"},{key:"https-proxy",label:"https-proxy",description:"HTTPS 代理",type:"text",category:"代理配置",placeholder:"http://proxy.example.com:8080"},{key:"noproxy",label:"noproxy",description:"不使用代理的域名",type:"text",category:"代理配置",placeholder:"localhost,127.0.0.1"},{key:"strict-ssl",label:"strict-ssl",description:"严格 SSL 检查",type:"boolean",category:"网络配置",defaultValue:"true"},{key:"maxsockets",label:"maxsockets",description:"最大并发连接数",type:"text",category:"网络配置",placeholder:"默认：15"},{key:"fetch-retries",label:"fetch-retries",description:"网络请求重试次数",type:"text",category:"网络配置",placeholder:"默认：2"},{key:"fetch-retry-mintimeout",label:"fetch-retry-mintimeout",description:"重试最小超时（毫秒）",type:"text",category:"网络配置",placeholder:"默认：10000"},{key:"fetch-retry-maxtimeout",label:"fetch-retry-maxtimeout",description:"重试最大超时（毫秒）",type:"text",category:"网络配置",placeholder:"默认：60000"},{key:"fetch-timeout",label:"fetch-timeout",description:"请求超时时间（毫秒）",type:"text",category:"网络配置",placeholder:"默认：300000"},{key:"cafile",label:"cafile",description:"CA 证书文件路径",type:"text",category:"网络配置",placeholder:"证书文件路径"},{key:"cert",label:"cert",description:"客户端证书路径",type:"text",category:"网络配置",placeholder:"证书文件路径"},{key:"key",label:"key",description:"客户端私钥路径",type:"text",category:"网络配置",placeholder:"私钥文件路径"},{key:"global-style",label:"global-style",description:"使用全局安装风格",type:"boolean",category:"行为配置"},{key:"legacy-peer-deps",label:"legacy-peer-deps",description:"忽略 peer dependencies 版本冲突",type:"boolean",category:"行为配置"},{key:"engine-strict",label:"engine-strict",description:"严格检查 Node 版本",type:"boolean",category:"行为配置"},{key:"always-auth",label:"always-auth",description:"总是需要认证",type:"boolean",category:"行为配置"},{key:"loglevel",label:"loglevel",description:"日志级别",type:"select",category:"日志配置",options:[{label:"silent（静默）",value:"silent"},{label:"error（错误）",value:"error"},{label:"warn（警告）",value:"warn"},{label:"notice（通知）",value:"notice"},{label:"http",value:"http"},{label:"info（信息）",value:"info"},{label:"verbose（详细）",value:"verbose"},{label:"silly（全部）",value:"silly"}]},{key:"progress",label:"progress",description:"显示进度条",type:"boolean",category:"日志配置",defaultValue:"true"},{key:"timing",label:"timing",description:"显示时间统计",type:"boolean",category:"日志配置"},{key:"color",label:"color",description:"使用彩色输出",type:"select",category:"日志配置",options:[{label:"always（总是）",value:"always"},{label:"true（启用）",value:"true"},{label:"false（禁用）",value:"false"}]},{key:"unicode",label:"unicode",description:"使用 Unicode 字符",type:"boolean",category:"日志配置"},{key:"fund",label:"fund",description:"显示资助信息",type:"boolean",category:"安全配置",defaultValue:"true"},{key:"audit",label:"audit",description:"进行安全审计",type:"boolean",category:"安全配置",defaultValue:"true"},{key:"audit-level",label:"audit-level",description:"安全审计级别",type:"select",category:"安全配置",options:[{label:"info（信息）",value:"info"},{label:"low（低风险）",value:"low"},{label:"moderate（中风险）",value:"moderate"},{label:"high（高风险）",value:"high"},{label:"critical（严重）",value:"critical"}]},{key:"script-shell",label:"script-shell",description:"脚本执行的 shell",type:"text",category:"其他配置",placeholder:"如: bash, sh, powershell"},{key:"update-notifier",label:"update-notifier",description:"显示更新通知",type:"boolean",category:"其他配置",defaultValue:"true"},{key:"legacy-bundling",label:"legacy-bundling",description:"使用旧版打包方式",type:"boolean",category:"其他配置"},{key:"install-links",label:"install-links",description:"安装 file: 协议的链接",type:"boolean",category:"其他配置",defaultValue:"true"},{key:"workspaces",label:"workspaces",description:"启用工作空间支持",type:"boolean",category:"其他配置"},{key:"save-dev",label:"save-dev",description:"默认保存到 devDependencies",type:"boolean",category:"其他配置"},{key:"save-optional",label:"save-optional",description:"保存到 optionalDependencies",type:"boolean",category:"其他配置"},{key:"save-peer",label:"save-peer",description:"保存到 peerDependencies",type:"boolean",category:"其他配置"},{key:"lockfile-version",label:"lockfile-version",description:"package-lock.json 版本",type:"select",category:"其他配置",options:[{label:"v1（兼容模式）",value:"1"},{label:"v2（npm 7+）",value:"2"},{label:"v3（npm 7+ 简化）",value:"3"}]},{key:"store-dir",label:"store-dir",description:"pnpm: 全局存储目录（所有项目共享，硬链接到此处节省空间）⭐ 常用配置",type:"text",category:"PNPM核心配置",placeholder:"Windows: %APPDATA%/pnpm-store | macOS/Linux: ~/.pnpm-store"},{key:"cache-dir",label:"cache-dir",description:"pnpm: 下载缓存目录（临时存储，完成后移至 store-dir）",type:"text",category:"PNPM核心配置",placeholder:"Windows: %APPDATA%/pnpm-cache | macOS: ~/Library/Caches/pnpm"},{key:"modules-dir",label:"modules-dir",description:"pnpm: 项目依赖目录名称（项目级，通常无需修改）",type:"text",category:"PNPM项目配置",placeholder:"默认：node_modules"},{key:"virtual-store-dir",label:"virtual-store-dir",description:"pnpm: 项目虚拟存储目录（项目级，通常无需修改）",type:"text",category:"PNPM项目配置",placeholder:"默认：node_modules/.pnpm"},{key:"global-dir",label:"global-dir",description:"pnpm: 全局包安装目录（仅 pnpm add -g 时使用，不影响项目依赖）",type:"text",category:"PNPM全局安装",placeholder:"Windows: %APPDATA%/pnpm/global | macOS/Linux: ~/.pnpm-global"},{key:"global-bin-dir",label:"global-bin-dir",description:"pnpm: 全局可执行文件目录（仅 pnpm add -g 时使用）",type:"text",category:"PNPM全局安装",placeholder:"Windows: %APPDATA%/pnpm | macOS/Linux: ~/.pnpm-global/bin"},{key:"node-linker",label:"node-linker",description:"pnpm: 节点链接器类型",type:"select",category:"PNPM安装配置",options:[{label:"isolated（默认，使用符号链接）",value:"isolated"},{label:"hoisted（提升到根目录）",value:"hoisted"},{label:"pnp（Plug'n'Play）",value:"pnp"}],defaultValue:"isolated"},{key:"package-import-method",label:"package-import-method",description:"pnpm: 包导入方法",type:"select",category:"PNPM安装配置",options:[{label:"auto（自动选择）",value:"auto"},{label:"hardlink（硬链接）",value:"hardlink"},{label:"copy（复制）",value:"copy"},{label:"clone（克隆）",value:"clone"}],defaultValue:"auto"},{key:"shamefully-hoist",label:"shamefully-hoist",description:"pnpm: 提升所有依赖到 node_modules 根目录",type:"boolean",category:"PNPM安装配置"},{key:"public-hoist-pattern",label:"public-hoist-pattern",description:"pnpm: 提升匹配的依赖到根目录",type:"text",category:"PNPM安装配置",placeholder:"如: *eslint*,*prettier*"},{key:"hoist-pattern",label:"hoist-pattern",description:"pnpm: 提升匹配的依赖到虚拟存储",type:"text",category:"PNPM安装配置",placeholder:"如: *"},{key:"strict-peer-dependencies",label:"strict-peer-dependencies",description:"pnpm: 严格的 peer dependencies 检查",type:"boolean",category:"PNPM安装配置",defaultValue:"true"},{key:"auto-install-peers",label:"auto-install-peers",description:"pnpm: 自动安装 peer dependencies",type:"boolean",category:"PNPM安装配置"},{key:"side-effects-cache",label:"side-effects-cache",description:"pnpm: 使用副作用缓存",type:"boolean",category:"PNPM安装配置",defaultValue:"true"},{key:"side-effects-cache-readonly",label:"side-effects-cache-readonly",description:"pnpm: 副作用缓存只读模式",type:"boolean",category:"PNPM安装配置"},{key:"resolution-mode",label:"resolution-mode",description:"pnpm: 依赖解析模式",type:"select",category:"PNPM安装配置",options:[{label:"highest（最高版本）",value:"highest"},{label:"time-based（基于时间）",value:"time-based"},{label:"lowest-direct（最低直接依赖）",value:"lowest-direct"}],defaultValue:"highest"},{key:"dedupe-peer-dependents",label:"dedupe-peer-dependents",description:"pnpm: 去重对等依赖",type:"boolean",category:"PNPM安装配置",defaultValue:"true"},{key:"enable-pre-post-scripts",label:"enable-pre-post-scripts",description:"pnpm: 启用 pre/post 脚本",type:"boolean",category:"PNPM安装配置"},{key:"use-running-store-server",label:"use-running-store-server",description:"pnpm: 使用运行中的存储服务器",type:"boolean",category:"PNPM安装配置"},{key:"verify-store-integrity",label:"verify-store-integrity",description:"pnpm: 验证存储完整性",type:"boolean",category:"PNPM安装配置",defaultValue:"true"},{key:"lockfile",label:"lockfile",description:"pnpm: 使用 lockfile",type:"boolean",category:"PNPM安装配置",defaultValue:"true"},{key:"prefer-frozen-lockfile",label:"prefer-frozen-lockfile",description:"pnpm: 优先使用冻结的 lockfile",type:"boolean",category:"PNPM安装配置",defaultValue:"true"},{key:"prefer-workspace-packages",label:"prefer-workspace-packages",description:"pnpm: 优先使用工作空间包",type:"boolean",category:"PNPM安装配置"},{key:"shared-workspace-lockfile",label:"shared-workspace-lockfile",description:"pnpm: 使用共享工作空间 lockfile",type:"boolean",category:"PNPM安装配置",defaultValue:"true"},{key:"use-beta-cli",label:"use-beta-cli",description:"pnpm: 使用 beta 版 CLI",type:"boolean",category:"PNPM安装配置"},{key:"recursive-install",label:"recursive-install",description:"pnpm: 递归安装工作空间依赖",type:"boolean",category:"PNPM安装配置",defaultValue:"true"},{key:"global-folder",label:"global-folder",description:"yarn: 全局安装包的目录",type:"text",category:"Yarn路径配置",placeholder:"默认：~/.config/yarn/global"},{key:"cache-folder",label:"cache-folder",description:"yarn: 缓存目录",type:"text",category:"Yarn路径配置",placeholder:"Windows: %LOCALAPPDATA%/Yarn/Cache | macOS: ~/Library/Caches/Yarn"},{key:"yarn-offline-mirror",label:"yarn-offline-mirror",description:"yarn: 离线镜像目录",type:"text",category:"Yarn路径配置",placeholder:"离线包存储路径"},{key:"modules-folder",label:"modules-folder",description:"yarn: node_modules 目录路径",type:"text",category:"Yarn路径配置",placeholder:"默认：node_modules"},{key:"yarn-offline-mirror-pruning",label:"yarn-offline-mirror-pruning",description:"yarn: 清理离线镜像中未使用的包",type:"boolean",category:"Yarn安装配置"},{key:"disable-self-update-check",label:"disable-self-update-check",description:"yarn: 禁用自我更新检查",type:"boolean",category:"Yarn安装配置"},{key:"network-timeout",label:"network-timeout",description:"yarn: 网络超时时间（毫秒）",type:"text",category:"Yarn安装配置",placeholder:"默认：30000"},{key:"enable-global-cache",label:"enable-global-cache",description:"yarn: 启用全局缓存（Yarn 3+）",type:"boolean",category:"Yarn安装配置"},{key:"nodeLinker",label:"nodeLinker",description:"yarn: 节点链接器模式（Yarn 3+）",type:"select",category:"Yarn安装配置",options:[{label:"node-modules（传统模式）",value:"node-modules"},{label:"pnp（Plug'n'Play）",value:"pnp"},{label:"pnpm（类似 pnpm）",value:"pnpm"}]},{key:"nmHoistingLimits",label:"nmHoistingLimits",description:"yarn: 提升限制（Yarn 3+）",type:"select",category:"Yarn安装配置",options:[{label:"workspaces（工作空间级别）",value:"workspaces"},{label:"dependencies（依赖级别）",value:"dependencies"},{label:"none（不提升）",value:"none"}]}],ge={taobao:{registry:"https://registry.npmmirror.com",disturl:"https://npmmirror.com/mirrors/node",sass_binary_site:"https://npmmirror.com/mirrors/node-sass",python_mirror:"https://npmmirror.com/mirrors/python",puppeteer_download_host:"https://npmmirror.com/mirrors",chromedriver_cdnurl:"https://npmmirror.com/mirrors/chromedriver",sentrycli_cdnurl:"https://npmmirror.com/mirrors/sentry-cli",sharp_binary_host:"https://npmmirror.com/mirrors/sharp",sharp_libvips_binary_host:"https://npmmirror.com/mirrors/sharp-libvips"},electron:{registry:"https://registry.npmmirror.com",disturl:"https://npmmirror.com/mirrors/node",electron_mirror:"https://npmmirror.com/mirrors/electron/",electron_builder_binaries_mirror:"https://npmmirror.com/mirrors/electron-builder-binaries/",sass_binary_site:"https://npmmirror.com/mirrors/node-sass"},official:{registry:"https://registry.npmjs.org","strict-ssl":!0},pnpm:{"store-dir":"D:\\pnpm-store"}},fe={class:"text-gray-900 truncate"},xe=["onClick"],ke={class:"truncate"},ce=le({__name:"Select",props:{modelValue:{default:""},options:{},size:{default:"md"}},emits:["update:modelValue"],setup(w,{emit:E}){const d=w,T=E,m=y(!1),f=y(),n=y(),_=y("bottom"),g=X(()=>d.options.find(k=>k.value===d.modelValue)?.label||"请选择");function i(x){T("update:modelValue",x),m.value=!1}async function b(){m.value=!m.value,m.value&&(await de(),p())}function p(){if(!f.value)return;const x=f.value.getBoundingClientRect(),k=240,h=window.innerHeight-x.bottom,O=x.top;h<k&&O>h?_.value="top":_.value="bottom"}function V(x){f.value&&!f.value.contains(x.target)&&(m.value=!1)}return re(()=>{document.addEventListener("click",V)}),ae(()=>{document.removeEventListener("click",V)}),(x,k)=>(c(),u("div",{class:"relative",ref_key:"selectRef",ref:f},[r("button",{onClick:b,class:P(["w-full flex items-center justify-between bg-white border border-gray-300 rounded-md hover:border-indigo-500 transition-colors text-left",w.size==="sm"?"px-2 py-1 text-xs min-w-[120px]":"px-3 py-2 text-sm",{"border-indigo-500":m.value}])},[r("span",fe,M(g.value),1),C(A,{name:"chevron-down",size:w.size==="sm"?"xs":"sm",class:P([{"transform rotate-180":m.value},"transition-transform text-gray-500 flex-shrink-0 ml-1.5"])},null,8,["size","class"])],2),C(ne,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:se(()=>[m.value?(c(),u("div",{key:0,ref_key:"dropdownRef",ref:n,class:P(["absolute z-50 w-full bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto",w.size==="sm"?"text-xs":"text-sm",_.value==="top"?"bottom-full mb-1":"top-full mt-1"])},[(c(!0),u(R,null,I(w.options,h=>(c(),u("button",{key:h.value,onClick:O=>i(h.value),class:P(["w-full text-left hover:bg-indigo-50 transition-colors flex items-center justify-between",w.size==="sm"?"px-2.5 py-1.5":"px-3 py-2",h.value===w.modelValue?"bg-indigo-50 text-indigo-600":"text-gray-900"])},[r("span",ke,M(h.label),1),h.value===w.modelValue?(c(),Y(A,{key:0,name:"check",size:w.size==="sm"?"xs":"sm",class:"text-indigo-600 flex-shrink-0 ml-1.5"},null,8,["size"])):L("",!0)],10,xe))),128))],2)):L("",!0)]),_:1})],512))}}),we=["placeholder"],_e=["onMousedown","onMouseenter"],Pe={class:"font-medium"},Ce={key:0,class:"text-gray-500 mt-0.5 truncate"},Ve=le({__name:"Combobox",props:{modelValue:{},options:{},placeholder:{default:""}},emits:["update:modelValue"],setup(w,{emit:E}){const d=w,T=E,m=y(null),f=y(null),n=y(null),_=y(null),g=y(d.modelValue),i=y(!1),b=y(-1),p=y({});let V=null;function x(){if(!f.value||!i.value){p.value={};return}const a=f.value.getBoundingClientRect(),v=window.innerHeight,e=240,t=v-a.bottom,o=a.top;t<e&&o>t?p.value={bottom:`${v-a.top+4}px`,left:`${a.left}px`,width:`${a.width}px`}:p.value={top:`${a.bottom+4}px`,left:`${a.left}px`,width:`${a.width}px`}}const k=y(!1),h=X(()=>{if(!k.value||!g.value)return d.options;const a=g.value.toLowerCase();return d.options.filter(v=>v.label.toLowerCase().includes(a)||v.value.toLowerCase().includes(a))});F(i,a=>{a&&requestAnimationFrame(()=>{x()})}),F(()=>d.modelValue,a=>{g.value=a}),F(g,a=>{T("update:modelValue",a)});function O(){i.value=!0,k.value=!1,b.value=-1}function $(){setTimeout(()=>{i.value=!1,k.value=!1},200)}function Z(){i.value=!0,k.value=!0,b.value=-1}function W(){i.value=!i.value,i.value&&(k.value=!1,_.value?.focus())}function G(a){g.value=a.value,i.value=!1,k.value=!1,_.value?.blur()}function ee(a){if(!i.value&&(a.key==="ArrowDown"||a.key==="ArrowUp")){i.value=!0,k.value=!1,a.preventDefault();return}if(i.value)switch(a.key){case"ArrowDown":a.preventDefault(),b.value<h.value.length-1&&(b.value++,j());break;case"ArrowUp":a.preventDefault(),b.value>0&&(b.value--,j());break;case"Enter":a.preventDefault(),b.value>=0&&b.value<h.value.length&&G(h.value[b.value]);break;case"Escape":a.preventDefault(),i.value=!1,_.value?.blur();break}}function j(){const a=n.value;if(!a)return;const v=a.children[b.value];if(v){const e=a.getBoundingClientRect(),t=v.getBoundingClientRect();t.bottom>e.bottom?v.scrollIntoView({block:"nearest"}):t.top<e.top&&v.scrollIntoView({block:"nearest"})}}function B(a){const v=a.target,e=m.value?.contains(v),t=n.value?.contains(v);!e&&!t&&(i.value=!1)}function q(){i.value&&(V||(V=window.requestAnimationFrame(()=>{x(),V=null})))}function H(){q()}function K(){q()}return re(()=>{document.addEventListener("click",B),window.addEventListener("scroll",H,!0),window.addEventListener("resize",K)}),ae(()=>{document.removeEventListener("click",B),window.removeEventListener("scroll",H,!0),window.removeEventListener("resize",K),V&&cancelAnimationFrame(V)}),(a,v)=>(c(),u("div",{class:"relative",ref_key:"comboboxRef",ref:m},[r("div",{class:"relative flex items-center",ref_key:"triggerRef",ref:f},[S(r("input",{ref_key:"inputRef",ref:_,"onUpdate:modelValue":v[0]||(v[0]=e=>g.value=e),type:"text",placeholder:w.placeholder,class:"flex-1 px-2 py-1 pr-8 text-xs bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 hover:border-indigo-400 transition-all min-w-0",onFocus:O,onBlur:$,onKeydown:ee,onInput:Z},null,40,we),[[oe,g.value]]),r("button",{type:"button",class:"absolute right-1 w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600 transition-colors",onMousedown:ie(W,["prevent"]),tabindex:"-1"},[C(A,{name:i.value?"chevron-up":"chevron-down",size:"xs"},null,8,["name"])],32)],512),(c(),Y(pe,{to:"body"},[C(ne,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:se(()=>[S(r("div",{ref_key:"dropdownRef",ref:n,style:ue(p.value),class:"fixed z-[9999] bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto"},[(c(!0),u(R,null,I(h.value,(e,t)=>(c(),u("div",{key:e.value,class:P(["px-3 py-2 text-xs cursor-pointer transition-colors",t===b.value?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onMousedown:ie(o=>G(e),["prevent"]),onMouseenter:o=>b.value=t},[r("div",Pe,M(e.label),1),e.value?(c(),u("div",Ce,M(e.value),1)):L("",!0)],42,_e))),128))],4),[[Q,i.value&&h.value.length>0]])]),_:1})]))],512))}}),Me={class:"w-full h-full flex flex-col"},Ne={class:"flex items-center gap-2 border-r border-gray-200 pr-4"},Ae={class:"flex items-center border-r border-gray-200 pr-4"},Te=["title"],$e={key:0,class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},je={key:1,class:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ze={class:"flex items-center bg-gray-100 rounded-lg p-0.5"},Se=["onClick","title"],Le={class:"flex-1 flex min-h-0"},Oe={class:"p-2 space-y-2"},De=["onClick"],Re={class:"flex items-center gap-1.5"},Ee={class:"text-xs font-semibold text-gray-700"},Be={class:"text-xs text-gray-400"},He={class:"bg-white border-0"},Ue={class:"p-2 space-y-1"},Ie={class:"flex items-center gap-2"},Ye=["title"],Fe={class:"flex-1 flex items-center gap-1.5 min-w-0 overflow-hidden"},We=["onUpdate:modelValue","placeholder"],Ge={key:3,class:"flex items-center gap-2 cursor-pointer"},qe=["onUpdate:modelValue"],Ke=["onClick"],Je=["onClick"],Qe=["title"],Xe={class:"flex-1 overflow-y-auto p-2 space-y-2"},Ze={class:"bg-white rounded-lg overflow-hidden shadow-lg border border-gray-200"},et={class:"flex items-center justify-between px-3 py-2 bg-gray-50 border-b border-gray-200"},tt={class:"flex gap-1.5"},ot=["disabled","title"],lt={class:"bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm"},rt={key:0,class:"p-3 text-xs text-gray-700 font-mono leading-relaxed max-h-96 overflow-auto select-text"},at={key:1,class:"p-3 text-xs text-gray-500 text-center"},st=le({__name:"NpmrcConfig",setup(w){const E=he(),d=ye(),T=y(new Set),m=y("dual"),f=y("current"),n=me({}),_=y(""),g=y(""),i=y(!1),b=y(!1),p=y("idle"),V=[{label:"双屏",value:"dual",icon:"layout-split"},{label:"编辑",value:"edit",icon:"edit"},{label:"预览",value:"preview",icon:"eye"}],x=[{label:"当前全局配置",value:"current"},{label:"淘宝镜像",value:"taobao"},{label:"Electron 专用",value:"electron"},{label:"官方源",value:"official"},{label:"PNPM配置",value:"pnpm"}],k=X(()=>{const e=new Set;J.forEach(o=>e.add(o.category));const t=Array.from(e);return i.value?t.filter(o=>h(o).length>0):t});function h(e){const t=J.filter(o=>o.category===e);return i.value?t.filter(o=>{const l=n[o.key];return l!=null&&l!==""}):t}function O(e){T.value.has(e)?T.value.delete(e):T.value.add(e)}function $(e){return T.value.has(e)}function Z(e){return e.options?e.options:[]}function W(e,t,o=new Set){return typeof e!="string"?e:e.replace(/\{\{(\w+)\}\}/g,(l,s)=>{if(o.has(s))return l;if(t[s]!==void 0&&t[s]!==null&&t[s]!==""){o.add(s);const N=W(String(t[s]),t,new Set(o));return o.delete(s),N}return l})}const G=X(()=>{const e=[];for(const[t,o]of Object.entries(n)){if(o==null||o==="")continue;let l=o;typeof o=="string"&&(l=W(o,n)),typeof l=="boolean"?e.push(`${t}=${l}`):e.push(`${t}=${l}`)}return e.length>0?e.join(`
`):"# 暂无配置"});F(G,e=>{b.value||(g.value=e)},{immediate:!0});function ee(e){if(!(!e||e.trim()===""||e==="# 暂无配置")){b.value=!0;try{const t=e.split(`
`),o={};for(const l of t){const s=l.trim();if(!s||s.startsWith("#")||s.startsWith(";"))continue;const N=s.indexOf("=");if(N>0){const z=s.substring(0,N).trim(),D=s.substring(N+1).trim(),U=J.find(te=>te.key===z);U&&U.type==="boolean"?o[z]=D==="true":o[z]=D}}Object.keys(n).forEach(l=>delete n[l]),Object.assign(n,o)}finally{setTimeout(()=>{b.value=!1},0)}}}let j=null;F(g,e=>{b.value||(j&&clearTimeout(j),j=window.setTimeout(()=>{ee(e)},500))});async function B(){if(f.value==="current"){await v();return}const e=ge[f.value];e&&(Object.keys(n).forEach(t=>delete n[t]),Object.assign(n,e),d.success(`已应用预设: ${x.find(t=>t.value===f.value)?.label}`))}async function q(){if(p.value!=="copying"){p.value="copying";try{await window.naimo.clipboard.writeText(g.value),p.value="success",d.success("已复制到剪贴板"),setTimeout(()=>{p.value="idle"},2e3)}catch{p.value="error",d.error("复制失败"),setTimeout(()=>{p.value="idle"},2e3)}}}async function H(){try{const e=await window.nodeToolboxAPI.readNpmrc();_.value=e}catch(e){console.error("刷新配置内容失败:",e)}}async function K(){try{d.info("正在备份当前配置...");const e=await window.nodeToolboxAPI.backupNpmrc();e&&d.success(`已备份到: ${e}`),d.info("正在写入全局配置..."),await window.nodeToolboxAPI.writeNpmrc(g.value),d.success("已应用到全局 .npmrc 文件"),await H()}catch(e){d.error(`应用失败: ${e.message}`)}}async function a(e){try{const t=await window.nodeToolboxAPI.selectFolder();t&&(n[e]=t,d.success(`已选择路径: ${t}`))}catch(t){d.error(`选择文件夹失败: ${t.message}`)}}async function v(){try{d.info("正在读取当前配置...");const e=await window.nodeToolboxAPI.readNpmrc();if(_.value=e,Object.keys(n).forEach(t=>delete n[t]),e){const t=e.split(`
`);let o=0;for(const l of t){const s=l.trim();if(!s||s.startsWith("#")||s.startsWith(";"))continue;const N=s.indexOf("=");if(N>0){const z=s.substring(0,N).trim(),D=s.substring(N+1).trim(),U=J.find(te=>te.key===z);U&&(U.type==="boolean"?n[z]=D==="true":n[z]=D,o++)}}d.success(`已加载当前全局配置 (${o} 项)`)}else d.warning("当前没有 .npmrc 配置文件")}catch{d.error("读取配置失败")}}return re(()=>{B(),H()}),ae(()=>{j&&clearTimeout(j)}),(e,t)=>(c(),u("div",Me,[(c(),Y(pe,{to:"#tab-actions"},[be(E).path==="/npmrc"?(c(),u(R,{key:0},[r("div",Ne,[t[3]||(t[3]=r("span",{class:"text-xs text-gray-600 font-medium"},"方案",-1)),C(ce,{modelValue:f.value,"onUpdate:modelValue":[t[0]||(t[0]=o=>f.value=o),B],options:x,size:"sm"},null,8,["modelValue"])]),r("div",Ae,[r("button",{onClick:t[1]||(t[1]=o=>i.value=!i.value),class:P(["px-2.5 py-1.5 text-xs rounded-md transition-all flex items-center gap-1.5",i.value?"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"]),title:i.value?"显示所有配置项":"只显示已配置项"},[i.value?(c(),u("svg",$e,[...t[4]||(t[4]=[r("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},null,-1)])])):(c(),u("svg",je,[...t[5]||(t[5]=[r("line",{x1:"8",y1:"6",x2:"21",y2:"6"},null,-1),r("line",{x1:"8",y1:"12",x2:"21",y2:"12"},null,-1),r("line",{x1:"8",y1:"18",x2:"21",y2:"18"},null,-1),r("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"},null,-1),r("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"},null,-1),r("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"},null,-1)])])),r("span",null,M(i.value?"已配置":"全部"),1)],10,Te)]),r("div",ze,[(c(),u(R,null,I(V,o=>r("button",{key:o.value,onClick:l=>m.value=o.value,class:P(["w-8 h-8 flex items-center justify-center rounded-md transition-all",m.value===o.value?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"]),title:o.label},[C(A,{name:o.icon,size:"sm"},null,8,["name"])],10,Se)),64))])],64)):L("",!0)])),r("div",Le,[S(r("div",{class:P([m.value==="dual"?"w-1/2 border-r border-gray-200":"w-full","overflow-y-auto overflow-x-hidden"])},[r("div",Oe,[(c(!0),u(R,null,I(k.value,o=>(c(),u("div",{key:o,class:"border border-gray-200 rounded-lg"},[r("div",{onClick:l=>O(o),class:P(["flex items-center justify-between px-3 py-1.5 bg-gray-50 hover:bg-gray-100 cursor-pointer transition-colors select-none sticky top-0 z-10 border-gray-200",{"border-b":!$(o),"rounded-lg":$(o),"rounded-t-lg":!$(o)}])},[r("div",Re,[r("div",{class:P(["text-gray-500 flex-shrink-0 transition-transform duration-200",{"rotate-0":!$(o),"-rotate-90":$(o)}])},[C(A,{name:"chevron-down",size:"xs"})],2),r("span",Ee,M(o),1),r("span",Be," ("+M(h(o).length)+") ",1)])],10,De),C(ne,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"max-h-0 opacity-0","enter-to-class":"max-h-[2000px] opacity-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"max-h-[2000px] opacity-100","leave-to-class":"max-h-0 opacity-0"},{default:se(()=>[S(r("div",He,[r("div",Ue,[(c(!0),u(R,null,I(h(o),l=>(c(),u("div",{key:l.key,class:"flex flex-col gap-1 py-1.5 px-2 hover:bg-gray-50 rounded transition-all group"},[r("div",Ie,[r("label",{class:"w-36 flex-shrink-0 text-xs font-medium text-gray-700 truncate",title:l.label},M(l.label),9,Ye),r("div",Fe,[l.type==="text"&&l.options?(c(),Y(Ve,{key:0,modelValue:n[l.key],"onUpdate:modelValue":s=>n[l.key]=s,options:Z(l),placeholder:l.placeholder,class:"flex-1"},null,8,["modelValue","onUpdate:modelValue","options","placeholder"])):l.type==="text"?S((c(),u("input",{key:1,"onUpdate:modelValue":s=>n[l.key]=s,type:"text",class:"flex-1 px-2 py-1 text-xs bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 hover:border-indigo-400 transition-all min-w-0",placeholder:l.placeholder},null,8,We)),[[oe,n[l.key]]]):l.type==="select"?(c(),Y(ce,{key:2,modelValue:n[l.key],"onUpdate:modelValue":s=>n[l.key]=s,options:[{label:"不设置",value:""},...l.options||[]],size:"sm",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue","options"])):l.type==="boolean"?(c(),u("label",Ge,[S(r("input",{"onUpdate:modelValue":s=>n[l.key]=s,type:"checkbox",class:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 cursor-pointer"},null,8,qe),[[ve,n[l.key]]]),t[6]||(t[6]=r("span",{class:"text-xs text-gray-700"},"启用",-1))])):L("",!0),l.type==="text"&&(["prefix","cache"].includes(l.key)||l.key.endsWith("-dir"))?(c(),u("button",{key:4,onClick:s=>a(l.key),class:"w-5 h-5 flex items-center justify-center flex-shrink-0 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded transition-all",title:"选择文件夹"},[C(A,{name:"folder",size:"xs"})],8,Ke)):L("",!0),n[l.key]!==void 0&&n[l.key]!==""?(c(),u("button",{key:5,onClick:s=>delete n[l.key],class:"w-5 h-5 flex items-center justify-center flex-shrink-0 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-all opacity-0 group-hover:opacity-100",title:"清除此项"},[C(A,{name:"x",size:"xs"})],8,Je)):L("",!0)])]),r("p",{class:"text-xs text-gray-400 leading-tight pl-0",title:l.description},M(l.description),9,Qe)]))),128))])],512),[[Q,!$(o)]])]),_:2},1024)]))),128))])],2),[[Q,m.value==="dual"||m.value==="edit"]]),S(r("div",{class:P([m.value==="dual"?"w-1/2":"w-full","flex flex-col overflow-hidden"])},[r("div",Xe,[r("div",Ze,[r("div",et,[t[7]||(t[7]=r("span",{class:"text-xs text-gray-700 font-mono font-semibold"},".npmrc",-1)),r("div",tt,[r("button",{onClick:q,disabled:p.value==="copying",class:P(["w-6 h-6 flex items-center justify-center rounded transition-all",p.value==="copying"?"text-indigo-400 cursor-not-allowed":p.value==="success"?"text-green-600 hover:text-green-700 hover:bg-green-50":p.value==="error"?"text-red-600 hover:text-red-700 hover:bg-red-50":"text-gray-600 hover:text-indigo-600 hover:bg-indigo-50"]),title:p.value==="copying"?"复制中...":p.value==="success"?"复制成功":p.value==="error"?"复制失败":"复制"},[C(A,{name:p.value==="copying"?"refresh":p.value==="success"?"check":p.value==="error"?"x":"copy",size:"xs",class:P({"animate-spin":p.value==="copying"})},null,8,["name","class"])],10,ot),r("button",{onClick:K,class:"w-6 h-6 flex items-center justify-center bg-green-600 hover:bg-green-700 text-white rounded transition-all",title:"应用到全局"},[C(A,{name:"save",size:"xs"})])])]),S(r("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>g.value=o),spellcheck:"false",class:"w-full p-3 text-xs text-gray-800 font-mono leading-relaxed bg-white resize-none focus:outline-none min-h-[300px]",placeholder:"# 在此编辑 .npmrc 配置"},null,512),[[oe,g.value]])]),r("div",lt,[t[8]||(t[8]=r("div",{class:"px-3 py-2 bg-gray-50 border-b border-gray-200"},[r("span",{class:"text-xs font-semibold text-gray-700"},"当前系统 .npmrc")],-1)),_.value?(c(),u("pre",rt,M(_.value),1)):(c(),u("div",at," 未找到配置文件 "))])])],2),[[Q,m.value==="dual"||m.value==="preview"]])])]))}});export{st as default};
